function shareLink(){navigator.share({text:"Check this:",url:l.origin.replace("com/","com"),hashtags:"freedom, humanrights"},{print:!1,language:"en"}).catch((e=>e)),st((()=>{Dom7(".shareAPIPolyfill-footer").remove();let e=()=>Dom7("#shareAPIPolyfill-backdrop").click(),t=Dom7('[data-tool="sms"]');if(t.length){t=t[0];let r=t.cloneNode(!0),a=t.parentNode;t.remove(),a.prepend(r),Dom7(r).click((()=>{l.href=`sms:?&body=Check this: ${l.origin.replace("com/","com")}`,e()}))}if(t=Dom7('[data-tool="copy"]'),t&&t.length){t=t[0];let r=t.cloneNode(!0);t.parentNode.replaceChild(r,t),Dom7(r).click((()=>{ct(l.origin.replace("com/","com")),e()}))}}),250),Dom7("#shareAPIPolyfill-container button").click((()=>c()))}function ct(e){const t=d.createElement("textarea");d.body.appendChild(t),t.value=e,t.select(),d.execCommand("copy"),t.remove()}function clone(e){let t={};for(let r in e)"object"==typeof e[r]&&null!=e[r]?t[r]=clone(e[r]):t[r]=e[r];return t}w.delay=e=>(e=e||750,new p((t=>setTimeout(t,e)))),(()=>{const e=d.getElementById("esink");d.getElementById("dtach"),w.supressEvents=!0,w.setupEventSink=()=>{for(let t in e)0===t.indexOf("on")&&(e[t]=e=>{supressEvents&&e.stopPropagation()})},setupEventSink(),w.refreshF7appDomNode=()=>{Dom7("div.toolbar").each((e=>{let t=e.parentNode;e.remove(),t.append(e)}))}})(),w.isIphone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),randomInteger=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,toggleOverlay=(e,t)=>{const r=d.getElementById("overlay");(e=e||!1===e?e:!r.classList.contains("on"))?(r.classList.add("on"),t&&(w.tst=st((()=>{w.wtst=app.toast.create({text:"We are still working on it, sorry about it, please wait ...",position:"top",horizontalPosition:"center",closeTimeout:14e3,cssClass:"tstwait ns"}).open(),Dom7(".tstwait").on("touchmove click",(()=>{closeWms()}))}),2e4))):(closeWms(),r.classList.remove("on"))},toggleLoader=(e,t,r,a)=>{const s=e.find("#ld1")[0],o=e.find(".block");if(s)if(r=void 0!==r?r:s.classList.contains(h)){o.length&&(o.removeClass("on"),o.addClass("off no-t"));let e=s.cloneNode(!0),t=s.parentNode;s.remove(),t.append(e),e.classList.remove(h)}else s.classList.add(h),a?aterr(e,a):o.length&&(o.removeClass("no-t"),o.addClass("on"));else if(!1!==r){o.length&&(o.removeClass("on"),o.addClass("off no-t"));let r=ld1.cloneNode(!0);vm.appIsReady&&r.querySelector("#ld2g").classList.remove(h),e.append(r),r.classList.remove(h),e[0].getBoundingClientRect().x>r.getBoundingClientRect().x&&(t=t||0,Dom7(r).css("left",50+100*t+"%"))}else!1===r&&(o.removeClass("no-t"),o.addClass("on"))},aterr=(e,t)=>{let r=e.find("#terr"),a=w.terrc=r.length?r[0]:terr[0].cloneNode(!0);st((()=>{r.length||(a.style.left=e.find("#ld1").css("left"),e.append(a)),st((()=>{const t=e.find("#ld1")[0];t&&!t.classList.contains(h)||(a.classList.remove("no-t"),a.classList.add("on"))}),10),e.find("#errb").on("click",t.h)}),10)},rterr=()=>{w.terrc&&(terrc.classList.add("no-t"),terrc.classList.remove("on"),terrc=null)},loadMore=()=>{let e=app.router;return new p(((t,r)=>{try{e.on("routerAjaxError",(e=>{e.requestUrl&&e.requestUrl.indexOf("more.html")&&r()})),e.allowPageChange=!0,e.xhrAbortController=null,e.pageComponentLoader({routerEl:null,componentUrl:"./more.html",options:{route:{url:"/more/",path:"/more/",route:{path:"/more/",componentUrl:"./more.html",keepAlive:!1}}},resolve:()=>{t()},reject:()=>{r()}})}catch(e){r()}}))},cardOnload=()=>{cardb.off("click").addClass("m"),Dom7(".dwnw").addClass("m"),delay(500).then((()=>{Dom7("#t2d").addClass(w.h),Dom7(".dwnb").addClass("m"),Dom7("#ph2d").removeClass(w.h)})),msg('Ops, it looks the card couldn\'t be saved automatically. <br/><br/> To save the card please <b>Press and Hold down your finger</b> <span class="material-icons" style="position:relative;top:4.1px;left:-1.4px;color:#1f9de6;">touch_app</span> on the picture and then save/download it to your device.',"Save Manually")},downErr=()=>{msg("Oops something happened, please try again."),toggleOverlay()},generateCard=()=>{closeDms(),toggleOverlay(!0,!0),delay().then((()=>{vm.r?downloadCard():createReg().then((e=>{e.data&&e.data.size?e.data.arrayBuffer().then((e=>{vm.r=btoa(String.fromCharCode(...new Uint8Array(e))),vm.rt=null!=d.c("a").download?0:1,vm.update({r:!0}),downloadCard()})):downErr()})).catch((()=>{downErr()}))}))},downloadCard=()=>{Dom7('[df="df"]').remove();let e=`${server}/download/freedomcard.png?r=${encodeURIComponent(vm.r)}`;if(vm.rt)card.onerror=()=>{card.onload=null,card.src=vm.tsrc,downErr()},card.onload=()=>{cardOnload(),toggleOverlay()},card.src=e+`&rt=${vm.rt}`;else{let t=w.dc=(w.dc||0)+1,r=e+`&rt=${vm.rt}&t=${t}`,a=d.c("iframe");a.setAttribute("src",r),a.setAttribute("df","df"),d.body.append(a);let s=a.contentWindow.location.href,o=()=>{try{return a.contentWindow.location.href!=s}catch(e){return!0}},l=()=>{let e=d.cookie;return e&&e.indexOf(t)>-1},n=0,c=0,i=si((()=>{0==c&&o()&&(c=4),1==c&&(c=o()?4:2),0==c&&l()&&(c=1),4==c&&(c=64,vm.rt=1,vm.update({r:!0}),card.onerror=()=>{c=32,card.onload=null,card.src=vm.tsrc},card.onload=()=>{32!=c&&(c=16)},card.src=e+`&rt=${vm.rt}`),n++,2250!=n||18&c||(card.src!=vm.tsrc&&(card.src=vm.tsrc),c=32),50&c&&(clearInterval(i),toggleOverlay(),2==c&&(isIphone||st((()=>{w.dms=app.toast.create({text:"Tip: If you see a message asking you to continue and allow access, go ahead and do so. This is normal, your browser is asking you to allow it to save the picture on your phone.",position:"top",horizontalPosition:"center",cssClass:"tstalmost ns"}).open(),w.vt.on("scroll",(()=>{closeDms()})),mswipper.on("sliderFirstMove",(()=>{closeDms()})),Dom7(".tstalmost").on("touchmove click",(()=>{closeDms()}))}),1500))),16==c&&cardOnload(),32==c&&msg("Oops something happened, please try again.")}),20)}},e1="ontouchstart",e2="ontouchmove",e3="ontouchend",e4="onclick",fc="remc(event,this)",fixc=e=>{e.cb=Dom7(e.classList.contains("i-c")?Dom7(e).closest(".o-c")[0]:e).find('input[type="checkbox"]')[0],Dom7(e).attr(e1,fc).attr(e2,fc).attr(e3,fc).attr(e4,fc)},remc=(e,t)=>{let r="on"+e.type,a=t.cb;if(r==e1||r==e4){t.st=1;let r=e.changedTouches[0];t.x1=r.clientX,t.y1=r.clientY}else{let r=e.changedTouches[0];(Math.abs(t.x1-r.clientX)>11||Math.abs(t.y1-r.clientY)>11)&&(t.st=0)}!t.st||r!=e3&&r!=e4||(e.target.classList.contains("e-c")&&(a.checked=!a.checked),t.st=0,e.target.hasAttribute("a")||e.target.parentNode.hasAttribute("a")||(e.preventDefault(),e.stopPropagation()))},clrcp=()=>{cpv.val(""),valcp()},setcp=()=>{vm.qs&&vm.qs.p&&cp.attr("src","data:image/png;base64, "+vm.qs.p.d)},valcp=()=>{let e="black";vm.vcp&&(cpv.val()||(e="red")),cpv.css("border",`1px solid ${e}`)},cpr=()=>!vm.qs||!vm.qs.p||new Date>addMins(new Date(vm.qs.p.updated),13),ucp=()=>{vm.qs&&vm.qs.p&&(vm.qs.p.updated=(new Date).getTime(),vm.update())},w.stf=(e,t)=>()=>vt.scrollTop(vt.offset().top-Math.abs(Dom7(e).offset().top-nb.height()-15),t),w.glb=(e,t)=>e`<svg style="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><g><circle fill="#59d8ff" cx="234.34" cy="217.055" r="173.496"/><path fill="#00c3f0" d="M271.994,325.252c-88.525-36.668-130.565-138.158-93.896-226.684	c8.518-20.564,20.646-38.491,35.184-53.634c-60.008,7.4-114.447,45.881-139.236,105.729c-36.668,88.525,5.37,190.016,93.895,226.684	c67.962,28.151,143.451,9.785,191.5-40.261C330.687,340.63,300.672,337.13,271.994,325.252z"/><path fill="#b4ff87" d="M338.434,147.658c-2.22,0-4.439-0.847-6.133-2.542c-3.389-3.389-3.389-8.879,0-12.267l8.675-8.675c3.389-3.389,8.879-3.389,12.267,0s3.389,8.879,0,12.267l-8.675,8.675C342.873,146.811,340.653,147.658,338.434,147.658z"/><path fill="#b4ff87" d="M264.823,96.789l19.534,1.878l2.521-7.11L248.965,78.11c-1.969-0.698-4.11-0.759-6.116-0.172l-22.649,6.62c-4.134,1.208-7.881-2.805-6.392-6.847l1.766-4.796c1.192-3.235-0.49-6.82-3.739-7.972l-0.937-0.332c-5.981-2.121-12.56-1.779-18.29,0.95l-4.912,2.34c-2.983,1.422-6.553,0.155-7.974-2.828l-5.221-10.662c-24.17,8.899-46.302,23.059-64.556,41.842l-0.362,33.539c-0.124,6.493,3.921,12.337,10.042,14.508l1.939,0.687v14.277c0,11.964,6.162,23.083,16.308,29.423l24.813,15.508l-6.97,8.934l-5.043,14.221c-1.587,4.475-0.975,9.437,1.654,13.393l12.525,18.85c2.628,3.956,3.241,8.918,1.654,13.393l-6.723,18.956c-2.678,7.553-3.813,15.567-3.335,23.566l1.301,21.793c0.171,2.87,2.011,5.373,4.701,6.391l0.044,0.016c3.827,1.45,8.098-0.529,9.465-4.386l7.507-21.168l14.428-3.641c4.185-1.056,7.85-3.585,10.322-7.122l8.714-12.469c1.997-2.56,5.409-3.555,8.47-2.469l3.544,1.257c3.263,1.157,6.894-0.054,8.808-2.939l8.321-12.542c3.486-5.254,3.96-11.951,1.248-17.643l-1.607-3.375c-2.047-4.298-5.719-7.607-10.206-9.199l-2.542-0.902c-2.991-1.06-5.438-3.266-6.803-6.131l-10.892-22.865c-2.956-5.396-19.517-16.219-19.517-16.219l-38.133-23.831c-3.339-2.086-4.784-6.21-3.476-9.925l0,0c3.285-9.335,13.604-14.267,22.931-10.958l3.501,1.242l-2.654,5.551c-2.067,4.324-0.237,9.505,4.084,11.572c1.211,0.576,2.482,0.847,3.736,0.847c3.236,0,6.346-1.817,7.837-4.931l8.201-17.148l50.406-26.597c1.432-0.682,3.077-0.768,4.573-0.237l8.506,3.017c2.08,0.738,4.397,0.271,6.029-1.216l2.701-2.46c2.283-2.079,2.608-5.554,0.751-8.021l-10.462-13.901C257.623,101.369,260.426,96.366,264.823,96.789z"/><path fill="#b4ff87" d="M394.626,283.45c7.612-18.378,11.649-37.305,12.765-56.104l-10.918-3.628c-3.34-1.184-6.955-1.354-10.391-0.487l-5.001,1.262c-6.501,1.641-13.366-0.612-17.631-5.784l-8.884-10.774c-4.139-5.019-9.565-8.82-15.697-10.995l-13.009-4.614c-6.917-2.454-14.631-0.448-19.478,5.063l-8.857,10.073c-2.903,3.301-5.15,7.126-6.619,11.27c-3.636,10.251-2.233,21.615,3.787,30.674l0.619,0.933c4.138,6.227,10.184,10.944,17.23,13.444l0.422,0.15c9.343,3.314,14.231,13.574,10.917,22.917l-6.715,18.935c-2.168,6.109-3.071,12.595-2.656,19.064l1.524,23.739c0.353,5.511,5.451,11.723,10.534,15.263C356.026,345.373,380.306,318.022,394.626,283.45z"/><path fill="#b4ff87" d="M407.117,202.387c-2.227-25.977-10.341-50.996-23.459-73.302l-13.682,5.606c-1.807,0.86-3.197,2.403-3.866,4.289l-4.249,11.98c-1.454,4.101-4.478,7.456-8.406,9.328c-2.3,1.095-4.822,1.641-7.368,1.592l-12.488-1.044c-5.416-0.452-10.458,2.802-12.275,7.926l-2.916,8.224c-2.209,6.229,1.05,13.069,7.278,15.277l9.677,3.432c4.411,1.565,9.33,0.413,12.588-2.946l11.185-11.531L407.117,202.387z"/></g></svg>`,openArt=(e,t)=>{let r=w.art[0];w.art.find(".title").html(e||t),r.s||(r.s=d.querySelector("#overlay .centext").cloneNode(!0),r.append(r.s),r.s.querySelector("path").setAttribute("fill","#000"),r.s=Dom7(r.s)),r.querySelector("path"),r.s.removeClass("off"),w.art.addClass("on"),artf.once("load error",(()=>{r.s.addClass("off"),artf.addClass("on")})),artf[0].src=t},closeArt=()=>{artf.off("load error"),art.removeClass("on"),artf.removeClass("on"),artf[0].src="about:blank"},oal=(e,t)=>{st(hideVsuc,500),openArt(...(vm.langs[vm.curLang]["a_"+t.getAttribute("a")]||"").split("->")),e.preventDefault(),e.stopPropagation()},cui=e=>`<i class="icon material-icons md-only cu" style="${e||""}">help_outline</i>`,cpvf=(e,t,a)=>{let s=0,o=0,l=0,n=parent;Dom7([parent,w]).on(r,(()=>{if(s){let r=n.innerHeight,c=n.innerWidth;(o-r>0||l-c>0)&&(e.hide(t,!1),a.scrollTop(2e4,-1!==navigator.userAgent.toLowerCase().indexOf("samsungbrowser")?0:260)),(o-r<0||l-c<0)&&e.show(t),o=r,l=c,2==s&&(s=0)}})),cpv.focus((()=>{s=1,o=n.innerHeight,l=n.innerWidth})).blur((()=>{s=2}))},getProto=e=>(Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e),isVisible=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.top<w.innerHeight||t.bottom>=0&&t.bottom<w.innerHeight},chkvli=()=>{w.vliEls=w.vliEls||Dom7(".vidif").map((e=>({e:Dom7(e),i:Dom7(e).find("iframe")}))),w.vliEls=w.vliEls.filter((e=>e.i&&e.i[0]&&"about:blank"==e.i[0].src)),w.vliEls&&w.vliEls.length?w.vliEls.forEach((e=>{e.e&&e.e[0]&&isVisible(e.e[0])&&(e.i.on("load error",(()=>{e.e.addClass("ready"),e.i.addClass("on"),st((()=>e.i.addClass("no-t")),1e3)})),e.i.attr("src",e.i.attr("vsrc")))})):clearInterval(w.vli)},initPs=()=>{w.noScroll||Dom7("#t0,#t2,#t3,#tb2,#tb3").scrollTop(0),delete w.noScroll},getRD=e=>new Date(new Date(e).setMinutes(0,0,0)).toLocaleString("en",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit"}),closeDms=()=>{w.dms&&w.dms.close(),w.vt.off("scroll"),mswipper.off("sliderFirstMove"),Dom7(".tstalmost").off("touchmove click")},closeWms=()=>{Dom7(".tstwait").off("touchmove click"),clearTimeout(w.tst),app.toast.close()},setupVsuc=()=>{w.vsuct=st(hideVsuc,6e4),Dom7("#vsuc").removeClass("hidden")},hideVsuc=()=>{if(w.vsuct){let e=Dom7("#vsuc");clearTimeout(w.vsuct),delete w.vsuct;let t=vt.offset().top-(e.height()+18.5);e.addClass("hidden"),vt.scrollTop(t)}},server=`${l.origin}/s`,getQuestions=()=>app.request.getJSON(`${server}/qs`),getPreview=()=>app.request.getJSON(`${server}/preview`),getCp=()=>app.request.getJSON(`${server}/cp`),getPlaces=()=>app.request.getJSON(`${server}/getPlaces`),getFullC=e=>app.request.getJSON(`${server}/fullc/${e}`),getFullCC=e=>app.request.getJSON(`${server}/fullcc/${e}`),createReg=()=>app.request({method:"GET",url:`${server}/createReg`,contentType:"application/json",xhrFields:{responseType:"blob"}}),validateUpload=()=>{vcb.removeClass("brd-err");var e=new FileReader;let t=d.getElementById("cupd"),r=t.files[0],a=14711;if(t.value&&r&&r.size>=a+1){e.readAsArrayBuffer(r);let t=()=>{msg("Something happened and we couldn't open this card, please try again or choose a different card.")};e.onerror=t,e.onload=()=>{let s=e.result;s.byteLength<a+1?t():(toggleOverlay(),delay().then((()=>{app.request({method:"POST",url:`${server}/validateUpload`,data:{token:btoa(String.fromCharCode(...new Uint8Array(s.slice(s.byteLength-16)))),cardInfo:clone(r)},contentType:"application/json",xhrFields:{responseType:"blob"}}).then((e=>{e.data&&e.data.size?e.data.arrayBuffer().then((e=>{vm.reg=btoa(String.fromCharCode(...new Uint8Array(s.slice(a,s.byteLength-16)))),vm.uploadToken=btoa(String.fromCharCode(...new Uint8Array(e))),vm.update(),upimg.attr("src",URL.createObjectURL(r)),uplink.addClass(h),upimg.removeClass(h),vcb.addClass("ok")})):msg("This is not a valid card. Please find your card by selecting a different file.")})).catch((()=>{msg("Oops something happened, please try again.")})).finally((()=>{toggleOverlay()}))})))}}else msg("The file you selected is not a valid voting card. Please select another file.")},vote=()=>{cpv.blur();let e=vm.qs,t=0;if(Dom7(".ans:checked").forEach((e=>t|=parseInt(e.value))),!t)return void delay(200).then((()=>{Dom7("#rw").removeClass(h),msg("Please select at least 1 question on Step 1","Select a question",stf("#qsc",1750))}));if(!vm.uploadToken||!vm.reg)return void delay(200).then((()=>msg("Please upload your voting card on Step 3. If you don't have have a voting card yet, scroll up ↑ to Step 2 to get one.","Almost ready",(()=>{vcb.addClass("brd-err"),stf("#vcc",750)()}))));let r=cpv.val();if(!r)return vm.vcp=!0,void delay(200).then((()=>{valcp(),cpm("Please enter the number in the box.","Almost ready")}));toggleOverlay(),delay().then((()=>{app.request.postJSON(`${server}/vote`,{ans:t,reg:vm.reg,token:vm.uploadToken,cp:r,cpa:e.p.k}).then((t=>{0==(t=t.data).r||1==t.r?(vm.qs.p=t.p,ucp(),vm.vcp=!0,setcp(),clrcp(),0==t.r?cpm("The number you entered didn't match, please try again.","Try again"):cpm("You entered the correct number but the page was open for too long without voting, please enter the number in the box again to vote. Thank you!","Number expired")):2==t.r?delay(300).then((()=>cpm("It seems the questions that you just voted for are no longer valid. We are going to refresh the page to get the latest questions and we ask you to vote again. Thank you!","Refresh Required",(()=>{remLS("qs"),remLS("langs"),remLS("preRes"),reload()})))):3!=t.r&&t.r?(Dom7(".ans").forEach((e=>e.checked=!1)),cupd.val(""),delete vm.reg,delete vm.uploadToken,cpv.val(""),e.p.k=t.k,vm.update(),delay(300).then((()=>{uplink.removeClass(h),upimg.addClass(h).attr("src","#"),vcb.removeClass("ok"),app.dialog.create({title:"Success!",text:"Thank you for voting! Your voice and contribution are very important and your votes will be added to the totals shortly. Please check back from time to time as we may add new questions. Thank you again!",buttons:[{text:"Share Us",close:!1,bold:!0,onClick:shareLink},{text:"Ok",bold:!0}]}).open().on("close",(()=>{Dom7("#rw").addClass(h),vt.scrollTop(0,1750),setupVsuc()}))}))):delay(300).then((()=>cpm("Oops, something happened and we couldn't complete your vote. Please try again OR refresh the page to try again.","Error",(()=>{cpv.blur()}))))})).catch((()=>{delay(200).then((()=>msg('Oops something happened, please try again by pressing "Vote" again.')))})).finally((()=>{toggleOverlay()}))}))},setText=e=>{let t=vm.langs[vm.curLang];return t&&t.__init&&addMins(vm.lastUpdated,vm.langsExpire)>=new Date?p.resolve():app.request.getJSON(`${server}/text/${vm.curLang}/${e||0}`).then((e=>{vm.langs[vm.curLang]=e.data,vm.langs[vm.curLang].__init=1,vm.update({langsOnly:!0}),app.emit("textUpdated")}))},getText=e=>(t,r,a)=>{let s=(vm.langs[vm.curLang]||[])[t];if(s){if(a&&a.length>0)for(let e=0;e<a.length;e++)s=s.replace("{"+e+"}",a[e]);s=s.replace(/{cui}/g,cui())}return s?e([s]):r?e([r]):null};const MAIN="main",MAIN_INDEX=0,MORE="more",MORE_INDEX=1,t0=0,t1=1,t2=2,t3=3,MAIN_END=3,MORE_START=0,NEW=0,LOADING=1,READY=2,ERROR=3;function createVm(){let e={};e.lastUpdated=new Date,e.curLang="en-us",e.langs={},e.langsExpire=2880,e.appIsReady=!1,e.frwIsReady=!1,e.tsrc="https://cdn.jsdelivr.net/gh/freedomhoolans/img/THIS_IS_NOT_A_VALID_CARD_DO_NOT_SAVE.png",e.loc="cc_AL",e.conts=null,e.countries=null,e.locExpire=10080,e.t1="Today",e.t2="Info",e.lfab=e=>{e?lfab.removeClass(h):lfab.addClass(h)},e.views=[],e.views[0]={id:MAIN,isReady:()=>e.frwIsReady&&null!=e.views.find((({tabs:e})=>null!=e.find((e=>2===e.state)))),tabs:[{t:"Today",id:0,refresh:()=>null!=e.preRes&&e.expired(e.preResExpire),getData:()=>null==e.preRes||e.expired(e.preResExpire)?getPreview().then((t=>{e.preRes=t.data,e.preRes.c?e.preRes.c[e.preRes.c.length-1].l=1:e.preRes.t?e.preRes.t[e.preRes.t.length-1].l=1:e.preRes.w[e.preRes.w.length-1].l=1,e.update()})):p.resolve(),onInit:()=>{e.ensureText(e.preRes,"r_q_")}},{t:"Vote",id:1,refresh:()=>null!=e.qs&&e.expired(e.qsExpire)||cpr(),getData:()=>[cpr()?getCp().then((t=>{e.qs=e.qs||{},e.qs.p=t.data,ucp(),e.vcp=!1,clrcp(),setcp()})):p.resolve(),new p(((t,r)=>{e.cl?t():(w.card.src=e.tsrc,e.cl=null,st((()=>{let a=0,s=clearInterval,o=si((()=>{e.cl?(s(o),t()):0===e.cl&&(s(o),r()),a++,300===a&&(s(o),r())}),50)}),randomInteger(10,10)))})),null==e.qs||e.expired(e.qsExpire)?getQuestions().then((t=>{let r=null;e.qs&&e.qs.p&&(r=e.qs.p),e.qs=t.data,e.qs.p=r,e.update()})):p.resolve()],onInit:()=>{e.ensureText(e.qs,"v_q_")}},{t:"Results",id:2,refresh:()=>0,getData:()=>p.all([new p(((t,r)=>{e.countries?t():(w.onl=()=>{e.countries=w.countryList,e.update({countries:!0}),t()},w.one=()=>{r()},a(s("https://cdn.jsdelivr.net/npm/iso-3166-country-list@0.2.0/country-list.min.js")))})),null!=e.conts?p.resolve():getPlaces().then((t=>(e.conts=t.data.t,e.counts=t.data.c,e.counts.forEach((e=>e.name=e.n)),e.update({contsOnly:!0}),p.resolve()))),e.getFull(e.loc,1)]).then((()=>{e.locVm=e.getLocVm(e.loc)}))},{t:"More",id:3,refresh:()=>0,getData:()=>new p((e=>{st(e,0,"")}))}]},e.views[1]={id:MORE,isReady:()=>e.frwIsReady&&null!=e.views[1].tabs.find((e=>2===e.state)),tabs:[{id:0,refresh:()=>0,getData:()=>new p((e=>{st(e,0,"")}))},{t:"Info",id:1,refresh:()=>(vli=si(chkvli,45),0),getData:()=>new p((t=>{st(t,e.appIsReady?2125:0,1)})),onInit:()=>{vli=si(chkvli,45)}},{t:"F.A.Q",id:2,refresh:()=>0,getData:()=>new p((e=>{st(e,0,"")}))},{t:"Help",id:3,refresh:()=>0,getData:()=>new p((e=>{st(e,0,"")}))}]},e.viewsExpire=20,e.preRes=null,e.preResExpire=60,e.qs=null,e.qsExpire=2880,e.expired=t=>new Date>addMins(e.lastUpdated,t),e.getVmTab=({view:t,tab:r})=>e.views.find((({id:e})=>e===t.id)).tabs.find((({id:e})=>e===r.id)),e.getTabData=({view:t,tab:r})=>{let a=e.getVmTab({view:t,tab:r});if(2===a.state)return new p((e=>{e({update:!1})}));let s=!e.frwIsReady,o=[];e.frwIsReady||o.push(e.loadFramework());let l=a.getData();return l instanceof Array?o=o.concat(l):o.push(l),p.all(o).then((t=>((a.onInit||(()=>0))(),{data:t,update:!0,appIsReady:s?s&&e.frwIsReady:null})))},e.loadFramework=()=>setText().then((()=>{e.frwIsReady=!0})),e.currView={view:{id:MAIN},tab:{id:0}},e.prevView=null,e.clv=()=>{remLS("currView"),remLS("prevView")},e.enumViewsAndTabs=t=>{for(let r=0;r<e.views.length;r++){let a=e.views[r];for(let e=0;e<a.tabs.length;e++)if(t({view:a,tab:a.tabs[e]}))return}},e.setCurrView=({view:t,tab:r})=>{t.id!=e.currView.view.id&&(e.prevView=e.currView),e.currView={view:t,tab:r},e.update({viewsOnly:!0})},e.isCurrView=({view:t,tab:r})=>e.currView.view.id===t.id&&e.currView.tab.id===r.id,e.fc={},e.fcExpire=60,e.getFull=(t,r)=>{let a=e.fc[`${t}`];if(a&&addMins(new Date(a.u),e.fcExpire)>=new Date)return p.resolve(a.d);{let a=500;r?a=0:toggleOverlay(),delete e.fc[`${t}`];let s=t.indexOf("cc_")>-1?getFullCC:getFullC;return delay(a).then((()=>s(t.replace("cc_","").replace("c_","")).then((a=>(e.ensureText(a.data,"r_q_"),e.fc[`${t}`]={d:a.data,u:new Date},e.update({fcOnly:!0}),r||toggleOverlay(),a.data))).catch((a=>{if(!r)throw toggleOverlay(),msg(`Oops something happened and we couldn't retrive the results for ${e.getLocName(t).n}, please try again.`),a}))))}},e.getLocVm=t=>{let r=e.getLocName(t);return r.qs=e.fc[t].d,r.iscc||(r.cn=e.conts.find((e=>r.qs.m===e.c)).n),r.cn=r.cn||r.n,r},e.getLocName=t=>{let r=t.indexOf("cc_")>-1,a=r?t.replace("cc_",""):t.replace("c_","");return{iscc:r,c:a,n:r?e.conts.find((e=>a===e.c)).n:(e.counts.find((e=>a===e.c))||e.countries.find((e=>a===e.code))).name}},e.ensureText=(t,r)=>{let a=(a,s)=>{if(a[s]&&a[s].length){let o=a[s].filter((t=>e.langs[e.curLang][r+t.q]));o&&o.length?(o.length!=t[s].length&&e.setLS("v",-1),t[s]=o):(e.setLS("v",-1),delete a[s])}};a(t,"c"),a(t,"t"),a(t,"w")},e.update=t=>{e.lastUpdated=new Date,l("lastUpdated",e.lastUpdated),(!t||t&&t.viewsOnly)&&l("currView",e.currView),(!t||t&&t.langsOnly)&&(l("curLang",e.curLang),l("langs",e.langs)),(!t||t&&t.resOnly)&&l("preRes",e.preRes),(!t||t&&t.qsOnly)&&l("qs",e.qs),(!t||t&&t.contsOnly)&&(l("conts",e.conts),l("counts",e.counts)),(!t||t&&t.fcOnly)&&l("fc",e.fc),(!t||t&&t.countries)&&l("countries",e.countries),(!t||t&&t.r)&&(l("r",e.r),l("rt",e.rt))};let t=localStorage,r=(()=>{try{return t.setItem("t","t"),t.removeItem("t"),!0}catch(e){return!1}})(),o=e=>{try{return JSON.parse(t.getItem(e))}catch(e){return null}},l=(e,r)=>t.setItem(e,JSON.stringify(r));if(e.setLS=l,w.remLS=e=>t.removeItem(e),w.addMins=(e,t)=>new Date(e.getTime()+6e4*t),r){if(o("v")!=parent.v){let e=o("r"),r=o("rt");t.clear(),l("v",parent.v),l("r",e),l("rt",r)}let r=o("lastUpdated");r&&(r=new Date(r),addMins(r,e.viewsExpire)>=e.lastUpdated&&(e.currView=o("currView")||e.currView),addMins(r,e.langsExpire)>=e.lastUpdated&&(e.curLang=o("curLang")||e.curLang,e.langs=o("langs")||e.langs),addMins(r,e.preResExpire)>=e.lastUpdated&&(e.preRes=o("preRes")||e.preRes),addMins(r,e.qsExpire)>=e.lastUpdated&&(e.qs=o("qs")||e.qs),addMins(r,e.locExpire)>=e.lastUpdated&&(e.conts=o("conts")||e.conts,e.counts=o("counts")||e.counts,e.countries=o("countries")||e.countries),e.fc=o("fc")||e.fc),e.r=o("r"),e.rt=o("rt"),e.update(),si((()=>e.update()),6e4)}return e}function lf(){if(w.eo)return void e("e");Framework7.use({params:{theme:"md"}});const t=w.app=new Framework7({init:!1,el:"#app",componentUrl:"./main.html"});if(t.request.setup({beforeSend:function(e){e.timeout=45e3,e.ontimeout=e.onerror}}),t.device.desktop)throw parent.l.style.display="none",g1.classList.remove(h),w.onerror=()=>!0,"e";t.onInitError=e=>{throw vm.clv(),e.requestUrl+" failed to load."},t.on("routerAjaxError",t.onInitError),t.on("appIsReady",(function(){parent.l.style.display="none",d.g("dtach").classList.add("on"),vm.appIsReady=!0,w.onerror=null})),vm=createVm(),t.init(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(j1=parent.innerHeight,j2=parent.innerWidth,parent.onresize=()=>{let e=parent.innerHeight,t=parent.innerWidth;parent.i.style.height=e>t&&j1<j2||t>e?"100vh":"",j1=e,j2=t}),w.rt={},Dom7(w).on("pageshow",(()=>{let e=w.rt;if(vm.appIsReady&&null!=e.cid&&e.cid===e.cv.tab.id){e.f(e.cid,null,0);let t=vm.getVmTab({view:{id:e.cv.view.id},tab:{id:e.rid}});t.state=2===t.state?t.state:0,vm.setCurrView(e.cv),vm.prevView=e.pv}w.rt={}})),w.msg=(e,r,a)=>{r=r||"Error",t.dialog.alert(e,r,a)},w.cpm=(e,t,r)=>{msg(e,t,(()=>{r?r():cpv.focus()}))}}